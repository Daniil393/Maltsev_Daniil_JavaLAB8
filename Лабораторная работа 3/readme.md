# Лабораторная работа 3. ИКНТ, Мальцев Даниил ИТ18 – группа LAB8

Лабораторная работа представляет из себя:

Класс Main - главный класс, который вызывает в себе классы заданий 1 - 9.

# Классы заданий 1 - 9:

1) public class TelephoneDirectory

2) public class Point

3) public class Shooter

4) public final class Name

5) public class AutomaticGun extends Pistol

6) public class AutomaticGun2 extends Weapon

7) public class Pistol

8) public class Name2

9) public class Pistol2 extends Weapon

10) public abstract class Weapon

И вспомогательный класс для проверки ввод: public class InputHelper

Рассмотрим каждый класс индивидуально

# Класс Main
Класс Main демонстрирует работу всех разработанных классов, выполняя требования заданий. Основная роль класса - создать объекты различных типов, вызвать их методы и визуально показать пользователю результаты работы.

Программа последовательно демонстрирует решения задач: функциональность пистолета, автомата, пистолета, который наследует класс Weapon; создание имен, телефонного справочника, стрелков; сравнение точек; возведение
чисел в степень.

> Задание 1 – (Демонстрация функционала пистолета)

В данном задании необходимо измените сущность Пистолет из задачи 5.1 2-й лабораторной работы. Модификация предполагает внесение следующих 
дополнительных требований: 
   + Имеет максимальное количество патронов. Максимальное количество устанавливается во 
время создания пистолета и не может быть изменено позднее. У пистолета можно узнать, 
какое максимальное количество он вмещает.
   + Может быть перезаряжен. Для перезарядки необходимо передать пистолету число, 
которое будет означать количество заряжаемых патронов. Если передано отрицательное 
число, необходимо выбросить ошибку, объясняющую, что отрицательного числа 
патронов быть не может. Если передано слишком большое число патронов – необходимо 
лишние вернуть.
   + Может быть разряжен. Это приводит к обнулению патронов в пистолете и возврате 
нужного числа пользователю.
   + Можно узнать сколько сейчас заряжено патронов.
   + Можно узнать заряжен он или разряжен.

  Создайте пистолет вместимостью 7, зарядите три патрона, выстрелите из него пять раз, затем 
зарядите в него 8 патронов, выстрелите еще 2 раза, разрядите его, сделайте контрольный 
выстрел.
Если все выполнено верно, то должно быть выведено: Бах! Бах! Бах! Клац! Клац! Бах! Бах! Клац!
___

В ходе выполнения данного задания был разработан класс Pistol.

### Класс Pistol
Класс состоит из полей, конструктора и методов.

*Поля*:
+  private int bullets - количество патронов
+  private final int capacity - вместимость

*Конструктор*:
+  public Pistol(int capacity)

*Методы*:
+  public void shoot() - выполняет один выстрел.
Если есть патроны — выводит "Бах!" и уменьшает их количество на 1.
Если патронов нет — выводит "Клац!".
+  public void shoot(int times) - выполняет несколько выстрелов подряд.
Если times отрицательное — выбрасывается IllegalArgumentException.
Для каждого выстрела:
      при наличии патронов выводится "Бах!" и уменьшается их количество;
      при отсутствии — выводится "Клац!".
+  public int reload(int bulletsToLoad) - перезаряжает пистолет.
Если количество патронов отрицательное — выбрасывается IllegalArgumentException.
Добавляет патроны, не превышая вместимость магазина.
Возвращает количество лишних патронов, которые не поместились.
+  public int unload() - разряжает пистолет.
Возвращает количество извлечённых патронов и устанавливает текущее количество в 0.
+  public boolean isLoaded() - проверяет, заряжен ли пистолет (есть ли хотя бы один патрон).
+  Геттеры для всех полей
+  Переопределенный toString() - формирует строковое представление

Результат выполнения задания:

```java
Бах!
Бах!
Бах!
Клац!
Клац!
Бах!
Бах!
Клац!
```



> Задание 2 – (Непустые имена)

В данном задании необходимо изменить сущность Имя из задания 1.3 2-й лабораторной работы. Гарантировать, что:
    + Как минимум один параметр будет иметь не null значение и не пустую строку.
    + Имя неизменяемо.
Продемонстрировать работоспособность решения на примерах.
___

В ходе выполнения данного задания был разработан класс Name.

### Класс Name
Класс состоит из полей, конструкторов и методов.

*Поля*:
+  private final String lastName - фамилия
+  private final String firstName - имя
+  private final String patronymic - отчество

*Конструкторы*:
+  public Name(String firstName, String patronymic, String lastName)
+  public Name(String firstName, String lastName)
+  public Name(String firstName)

*Методы*:
+  private String normalize(String s) - вспомогательный метод нормализации строки
         Если строка null — возвращает null;
         Удаляет пробелы в начале и конце строки (trim());
         Если после удаления пробелов строка пустая — возвращает null;
         Иначе возвращает очищенную строку.
         Используется для корректной обработки ФИО без лишних пробелов.
+  private void validate() - метод валидации данных объекта.
Проверяет, чтобы хотя бы одно из полей ФИО (firstName, lastName, patronymic) было заполнено.
Если все три поля равны null, выбрасывается IllegalArgumentException.
+  Геттеры для всех полей
+  Переопределенный toString() - формирует строковое представление

Результат выполнения задания:

```java
=== Непустые имена ===
Только имя: Даниил
Имя и фамилия: Мальцев Даниил
Полное ФИО: Мальцев Даниил Николаевич

Попытка создать пустой объект:
Ошибка создания: Хотя бы одно из ФИО должно быть написано
```



> Задание 3 – (Телефонный справочник)

Необходимо разработать сущность ТелефонныйСправочник, который будет использоваться для 
создания справочника со списком телефонов и имен, с целью поиска телефона по имени. Будем 
считать достаточным хранение пар телефон-строка, например “89003337788 - Вася”.
Состояние сущности описывается набором пар “телефон – имя”, причем и телефон и имя являются 
строками. В целях упрощения задачи будем считать, что одному имени всегда соответствует один 
телефон, и один телефон соответствует одному имени.
Инициализация сущности выполняется без аргументов.
Поведение сущности описывают следующие действия:
       + Добавление новой пары “телефон – имя” (как два отдельных аргумента). Конкретное 
местоположение добавленной пары не важно. Если добавляемое имя уже есть в списке, то 
имеющийся телефон заменяется на новый, и затем старый телефон возвращается из 
метода. 
       + Удаление значения. Для удаления необходимо указать имя удаляемого контакта, после 
чего удаляется вся пара.
      + Получение значений. Для получения необходимо указать имя контакта, тогда 
возвращается его телефон. 
      + Может быть приведен к строке. Строка должна представлять собой полный перечень всех 
хранимых пар.
      + Можно проверить есть ли конкретный телефон или конкретное имя в списке. 
      + Можно узнать текущее количество контактов. 
      + Можно запросить в виде массива:
         o Все пары
         o Все телефоны
         o Все имена
      + Можно получить массив всех имен, указав часть названия (начиная с первого символа).
Продемонстрируйте работоспособность решения на примерах.
___

В ходе выполнения данного задания был разработан класс TelephoneDirectory.

### Класс TelephoneDirectory
Класс состоит из поля и методов.

*Поле*:
+  private final Map<String, String> directory = new HashMap<>() - коллекция, хранящая пары имя → телефон. Реализована на основе HashMap.

*Методы*:
+  public String add(String phone, String name) - добавляет запись в справочник.
      Имя и телефон не могут быть null (проверяется через Objects.requireNonNull);
      Если запись с таким именем уже существовала — возвращает старый номер телефона;
      Если записи не было — возвращает null.
+  public String remove(String name) - удаляет запись по имени.
+  public String getPhone(String name) - возвращает номер телефона по имени.
+  public boolean containsName(String name) - проверяет наличие имени в справочнике.
+  public boolean containsPhone(String phone) - проверяет наличие телефона в справочнике.
+  public int size() - выводит количество контактов справочника.
+  public Map<String, String> getAllPairs() - возвращает копию всех пар имя → телефон.
озвращается новый объект Map, чтобы внешние изменения не влияли на внутреннее состояние справочника.
+  public String[] getAllNames() - возвращает массив всех имён из справочника.
+  public String[] getAllPhones() - возвращает массив всех телефонов из справочника.
+  public String[] getNamesByPrefix(String prefix) - возвращает массив имён, начинающихся с указанного префикса. Использует Stream API и метод startsWith.
+  Переопределенный toString() - формирует строковое представление

Результат выполнения задания:

```java
Добавление записей: 
Маша - 89305260169
Даня - 89577397333
Артем - 89116529990
Анна - 89116556782

Удаление контакта 'Анна': 
Маша - 89305260169
Даня - 89577397333
Артем - 89116529990

Поиск номера по имени 'Маша': 
89305260169

Размер телефонного справочника: 
3

Все пары в виде массива: 
{Даня=89577397333, Маша=89305260169, Артем=89116529990}

Все телефоны в виде массива: 
[89305260169, 89577397333, 89116529990]

Все имена в виде массива: 
[Маша, Даня, Артем]

Поиск имени по префиксу - 'А'
[Артем]

Добавим Анну обратно
Поиск по префиксу после добавления Анны: 
[Артем, Анна]

Замена номера Маши на другой: 
Старый номер Маши: 89305260169
Текущий справочник:
Маша - 89223891081
Даня - 89577397333
Артем - 89116529990
Анна - 89116556782
```



> Задание 4 – (Автомат)

Необходимо создать такой подвид сущности Пистолет, которая будет совпадать с 
ней во всех отношениях, кроме следующего:
       + Имеет скорострельность (целое число, неизменяемое) которое обозначает количество 
выстрелов в секунду, поддерживаемое данным автоматом. Скорострельность всегда 
положительное число.
       + При вызове Стрелять количество выстрелов соответствует скорострельности (например, 
при скорострельности 3 выводится три строки с текстом выстрела). 
       + Умеет Стрелять N секунд, что приводит к количеству выстрелов равному N умноженное 
на скорострельность.
       + Инициализация может быть выполнены следующими способами:
         a) Без параметров. Скорострельность 30, вместимость 30.
         b) С указанием максимального числа патронов. Скорострельность будет равна половине обоймы
         c) С указанием максимального количества патронов в обойме и скорострельности.
___

В ходе выполнения данного задания был разработан класс AutomaticGun и использовался класс Pistol, описанный в задании 1.

### Класс AutomaticGun
Класс состоит из поля, конструкторов и методов.

*Поле*:
+  private final int fireRate - скорострельность

*Конструкторы*:
+  public AutomaticGun() - создаёт автомат:
      вместимость магазина — 30 патронов;
      скорострельность — 30 выстрелов.
+  public AutomaticGun(int capacity) - создаёт автомат с заданной вместимостью магазина:
      вместимость устанавливается через конструктор родительского класса;
      скорострельность равна половине вместимости магазина.
+  public AutomaticGun(int capacity, int fireRate) - создаёт автомат с заданной вместимостью и скорострельностью:
      вместимость передаётся в конструктор Pistol;
      если fireRate меньше или равен 0 — выбрасывается IllegalArgumentException;
      иначе устанавливается указанная скорострельность.

*Методы*:
+  public void shoot() - переопределённый метод стрельбы.
Выполняет автоматическую очередь выстрелов, равную значению fireRate,
используя метод shoot(int times) родительского класса.
+  public void shoot(int seconds) - стрельба в течение заданного количества секунд.
      Если seconds меньше или равно 0 — выбрасывается IllegalArgumentException;
      Количество выстрелов рассчитывается как seconds * fireRate;
      Далее вызывается метод стрельбы родительского класса.
+   Геттер для поля
+  Переопределенный toString() - формирует строковое представление

Результат выполнения задания:

```java
=== Демонстрация автомата ===
Пистолет [патроны: 20]
Одна очередь (должно быть 5 выстрелов): 
Бах!
Бах!
Бах!
Бах!
Бах!
Осталось патронов: 15

Стрельба 3 секунды (5 * 3 = 15 выстрелов): 
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Бах!
Осталось патронов: 0

Попытка стрелять при пустом магазине:
Клац!
Клац!
Клац!
Клац!
Клац!
Пистолет [патроны: 10]
Разрядка: 
Извлечено патронов: 10
```



> Задание 5 – (Оружие)

Измените сущность Пистолет, полученную в задаче 2.1.5 таким образом, чтобы она наследовалась 
от класса Weapon описанного ниже:

```java
public abstract class Weapon {

    private int ammo;

    public Weapon(int ammo) {
        if (ammo < 0) {
            throw new RuntimeException("Количество патронов не может быть отрицательным");
        }
        this.ammo = ammo;
    }

    public abstract void shoot();

    public int ammo() {
        return ammo;
    }

    public boolean getAmmo() {
        if (ammo == 0) {
            return false;
        }
        ammo--;
        return true;
    }

    public int load(int ammo) {
        if (ammo < 0) {
            throw new RuntimeException("Количество патронов не может быть отрицательным");
        }
        int tmp = this.ammo;
        this.ammo = ammo;
        return tmp;
    }
}
```

___

В ходе выполнения данного задания был разработан класс Pistol2 и использовался класс Weapon из задания.

### Класс AutomaticGun
Класс состоит из поля, конструкторов и методов.

*Поле*:
+  private final int fireRate - скорострельность

*Конструкторы*:
+  public AutomaticGun() - создаёт автомат:
      вместимость магазина — 30 патронов;
      скорострельность — 30 выстрелов.
+  public AutomaticGun(int capacity) - создаёт автомат с заданной вместимостью магазина:
      вместимость устанавливается через конструктор родительского класса;
      скорострельность равна половине вместимости магазина.
+  public AutomaticGun(int capacity, int fireRate) - создаёт автомат с заданной вместимостью и скорострельностью:
      вместимость передаётся в конструктор Pistol;
      если fireRate меньше или равен 0 — выбрасывается IllegalArgumentException;
      иначе устанавливается указанная скорострельность.

*Методы*:
+  public void shoot() - переопределённый метод стрельбы.
Выполняет автоматическую очередь выстрелов, равную значению fireRate,
используя метод shoot(int times) родительского класса.
+  public void shoot(int seconds) - стрельба в течение заданного количества секунд.
      Если seconds меньше или равно 0 — выбрасывается IllegalArgumentException;
      Количество выстрелов рассчитывается как seconds * fireRate;
      Далее вызывается метод стрельбы родительского класса.
+   Геттер для поля
+  Переопределенный toString() - формирует строковое представление

Результат выполнения задания:

```java

```
